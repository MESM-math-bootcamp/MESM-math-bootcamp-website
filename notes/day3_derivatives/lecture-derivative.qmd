---
format: 
  revealjs:
    chalkboard: true
    slide-number: true
    show-slide-number: print
    theme:
     - ../../ucsb-media.scss    
---

## {#title-slide data-menu-title="Title Slide" background=.white}

[Rules and Applications of Derivatives]{.custom-title .blue-text}

[Bren Calculus Workshop]{.custom-subtitle .gold}

<hr class="hr-teal">

[Carmen Galaz Garc√≠a, Ph.D.]{.body-text-l .center-text .blue-text}

[Bren School of Environmental Science & Management]{.center-text .body-text-m .blue-text}

<br>

<br>

[**Last updated:** `r format(Sys.time(), '%b %d, %Y')`]{.body-text-s .blue-text}

<br>

*Materials have been adapted from Nathaniel Grimes work for the Bren Calculus Workshop.*

<!---------------------------------------------------------------------->

## {#tr data-menu-title="Team Review"}

[Team Review]{.slide-title}

- How did everyone feel about the problem set?

- Any questions?

- Discuss with team
<!---------------------------------------------------------------------->

## {#product-rule-blank data-menu-title="Product Rule"}

[Rules for differentiation (4)]{.slide-title}

<hr>

**Product Rule**

<!---------------------------------------------------------------------->

## {#product-rule data-menu-title="Product Rule"}

[Rules for differentiation (4)]{.slide-title}

<hr>

**Product Rule**

Let $f(x)$ and $g(x)$ be differentiable functions. Then

$$
\large
\frac{d}{dx}[f(x)*g(x)]=f(x)g'(x)+g(x)f'(x)
$$

What this is saying:

- Breakdown multiplication into two separate functions

- Then take the first function times the derivative of the second, and add the second function times the derivative of the first.

<!---------------------------------------------------------------------->

## {#prod-ex-blank data-menu-title="Product rule example"}

[Product rule example]{.slide-title}

<hr>

‚úèÔ∏è [Find the derivative of $y=2x(x^2+3x)$.]{style="color:green;"}

<!---------------------------------------------------------------------->

## {#prod-ex data-menu-title="Product rule example"}

[Product rule example]{.slide-title}

<hr>

‚úèÔ∏è [Find the derivative of $y=2x(x^2+3x)$.]{style="color:green;"}

We have that:

$$
\begin{align}
y&=2x(x^2+3x) \\[3px]
y&=\overbrace{2x}^{f(x)}\overbrace{(x^2+3x)}^{g(x)} &\text{Break into two functions}\\[3px]
\frac{dy}{dx}&=\overbrace{2x}^{f(x)}\overbrace{(2x+3)}^{g'(x)}+\overbrace{2}^{f'(x)}\overbrace{(x^2+3x)}^{g(x)} &\text{Apply Power Rule}\\[3px] 
\frac{dy}{dx}&=6x^2+12x  &\text{Algebra clean up}
\end{align}
$$

What is another way we could have computed this derivative?
<!---------------------------------------------------------------------->

## {#quotient-rule-blank data-menu-title="Quotient Rule"}

[Rules for differentiation (5)]{.slide-title}

<hr>

**Quotient Rule**

<!---------------------------------------------------------------------->

## {#quotient-rule data-menu-title="Quotient Rule"}

[Rules for differentiation (5)]{.slide-title}

<hr>

**Quotient Rule**

$$
\large
\frac{d}{dx}\left [\frac{f(x)}{g(x)}\right]=\frac{g(x)f'(x)-f(x)g'(x)}{[g(x)]^2}
$$

Notice:

- Same idea as product rule, but order matters.

- The denominator has to be $g(x)$

<!---------------------------------------------------------------------->

## {#quo-ex-blank data-menu-title="Quotient Rule Example"}

[Quotient rule example]{.slide-title}

<hr>

‚úèÔ∏è [Find the derivative of $y=\frac{x^2}{(x+1)}$.]{style="color:green;"}

<!---------------------------------------------------------------------->


## {#quo-ex data-menu-title="Quotient Rule Example"}

[Quotient rule example]{.slide-title}

<hr>

‚úèÔ∏è [Find the derivative of $y=\frac{x^2}{(x+1)}$.]{style="color:green;"}

$$
\begin{align}
y &= \frac{x^2}{(x+1)} \\[3px]
y &= \frac{\overbrace{x^2}^{f(x)}}{\underbrace{(x+1)}_{g(x)}} &\text{Identify functions}\\[3px]
\frac{dy}{dx} &= \frac{\overbrace{(x+1)}^{g(x)}\overbrace{2x}^{f'(x)}-\overbrace{x^2}^{f(x)}\overbrace{(1)}^{g'(x)}}{\underbrace{(x+1)^2}_{[g(x)]^2}} &\text{Quotient rule}\\[3px]
\frac{dy}{dx} &= \frac{x^2+2x}{(x+1)^2} &\text{Simplify} \\[3px]
\end{align}
$$

<!--
$$
\begin{align}
y&=\frac{x^2}{(x+1)} \\[3px]
y&=\class{fragment}{{}\frac{\overbrace{x^2}^{f(x)}}{\underbrace{(x+1)}_{g(x)}}} &\text{Identify Functions}\\[3px]
\frac{dy}{dx}&=\class{fragment}{{}\frac{\overbrace{(x+1)}^{g(x)}\overbrace{2x}^{f'(x)}-\overbrace{x^2}^{f(x)}\overbrace{(1)}^{g'(x)}}{\underbrace{(x+1)^2}_{[g(x)]^2}}} &\text{Quotient Rule}\\[3px]
\frac{dy}{dx}&=\class{fragment}{{}\frac{x^2+2x}{(x+1)^2}\\[3px]}
\end{align}
$$
-->

<!--**Note:** Applying the quotient rule can yield some complex algebraic expressions. Try to reduce it down to a usable form.-->

<!---------------------------------------------------------------------->


## {#function-composition-blank data-menu-title="Composition of functions"}

[Composition of functions]{.slide-title}

<hr>


If we have two functions $f$ and $g$, **the composition of $f$ and $g$** is 

$$f\circ g (x) = f(g(x)).$$

This means that the output of $g(x)$ is now the input of $f(x)$. In other words, composition of functions means applying one function to the result of another.

. . .

<br>

**Examples**

‚úèÔ∏è [Let $f(x) = x^2$ and $g(x) = 2x+3$. What is $f\circ g (x)$?]{style="color:green;"}

<br>
<br>

‚úèÔ∏è [Let $h(x) = \sqrt{ 3x^2 + 10}$. How can we write $h$ as a composition of functions?]{style="color:green;"}


<!---------------------------------------------------------------------->


## {#function-composition data-menu-title="Composition of functions"}

[Composition of functions]{.slide-title}

<hr>

If we have two functions $f$ and $g$, **the composition of $f$ and $g$** is 

$$f\circ g (x) = f(g(x)).$$

This means that the output of $g(x)$ is now the input of $f(x)$. In other words, composition of functions means applying one function to the result of another.

<br>


**Examples**

‚úèÔ∏è [Let $f(x) = x^2$ and $g(x) = 2x+3$. What is $f\circ g (x)$?]{style="color:green;"}

We have that $f\circ g (x)  = (2x+3)^2$.


‚úèÔ∏è [Let $h(x) = \sqrt{ 3x^2 + 10}$. How can we write $h$ as a composition of functions?]{style="color:green;"}

If we make $f(x) = \sqrt{x}$ and $g(x) = 3x^2 +10$ then we have that $f\circ g (x) = \sqrt{ 3x^2 + 10}.$

<!---------------------------------------------------------------------->

## {#chain-rule-blank data-menu-title="Chain Rule"}

[Rules for differentiation (6)]{.slide-title}

<hr>

**Chain Rule**

<!---------------------------------------------------------------------->

## {#chain-rule data-menu-title="Chain Rule"}

[Rules for differentiation (6)]{.slide-title}

<hr>

**Chain Rule**

$$
\large
\frac{d}{dx}f\circ g(x)= \frac{d}{dx} f(g(x)) \frac{d}{dx}g(x) 
$$
<!--= f'(g(x))\cdot g'(x)-->

- "Take the derivative of the outermost function then multiply by the derivative of the innermost."

- Probably the most important rule for advanced calculus!

. . .

You may also encounter the chain rule in this form

$$\frac{dy}{dx} = \frac{dy}{du}\cdot\frac{du}{dx}.$$

The next example will show us what this means. 

<!---------------------------------------------------------------------->

## {#chain-ex-blank data-menu-title="Chain Rule Example"}

[Chain rule example]{.slide-title}

<hr>

‚úèÔ∏è [What is the derivative of $y = (x^3 -2)^2$?]{style="color:green;"}
Let's use a trick called **$u$-substitution.**

. . .

1. Identify the inner function and label it as $u$. Rewrite $y$ in terms of $u$:

<br>
<br>

2. Take the derivative of $y$ with respect to $u$ and substitute $u$: 

<br>
<br>

3. And the derivative of $u$ with respect to $x$: 

<br>
<br>

4. Put everything back into the chain rule and simplify:


<!---------------------------------------------------------------------->

## {#chain-ex data-menu-title="Chain Rule Example" .smaller}

[Chain rule example]{.slide-title}

<hr>

‚úèÔ∏è [What is the derivative of $y = (x^3 -2)^2$?]{style="color:green;"}
Let's use a trick called **$u$-substitution.**


1. Identify the inner function and label it as $u$. Rewrite $y$ in terms of $u$:

$$
\begin{align}
y &= (x^3-2)^2 \\
u &= x^3-2 \\
y &= u^2
\end{align}
$$

2. Take the derivative of $y$ with respect to $u$ and substitute $u$: 

$$\frac{dy}{du} = 2u = 2(x^3-2).$$

3. And the derivative of $u$ with respect to $x$: 

$$\frac{du}{dx} = 3x^2.$$

4. Put everything back into the chain rule and simplify:

$$
\begin{align}
\frac{dy}{dx} &= \frac{dy}{du}\cdot\frac{du}{dx} \\
              &= 2(x^3-2)(3x^2) 
              = 6x^5 -12x^2.
\end{align}
$$

<!--TODO: add the rules we covered to the differentiation table-->

<!---------------------------------------------------------------------->

## {#number-e data-menu-title="The number $e$"}

<!-- 
A very nice slide deck Carmen made to explain what e is to my 34A summer 2020 students.
https://docs.google.com/presentation/d/1uztsfd9fwG49lxsDgxhyQZVsbFQDkmszsSkQdDivz2Q/edit?usp=sharing
-->

[The number $e$ and exponential funcitons]{.slide-title}

<hr>

The **number $e$ is a constant** in mathematics, it is approximately $e\approx 2.72$, but really its decimals continue infinitely without any pattern. 

. . .

It's exact value can be described as 
$$
e = \lim_{n\to \infty}\left(1+\frac{1}{n}\right)^n.
$$

Like any other number, $e$ follows normal power properties

$$
\begin{align}
e^{x+y}&=&e^x\cdot e^y \\
e^{-x}&=&\frac{1}{e^x}\\
e^{x-y}&=&\frac{e^x}{e^y}\\
e^{rx}&=&(e^x)^r 
\end{align}
$$


<!---------------------------------------------------------------------->

## {#exponential-function data-menu-title="The exponential function $e^x$"}

[The number $e$ and exponential funcitons]{.slide-title}

<hr>

The **exponential function $e^x$** is the number $e$ raised to the $x$ power. In function notation you may sometimes see it as

$$ f(x) = e^x \ \ \text{ or } \ \ \text{exp}(x).$$


```{r,fig.align='center',out.width="75%"}
library(tidyverse)
x=seq(-3,3,by=0.01)
y=exp(x)

ggplot()+
  geom_line(aes(x=x,y=y),color="black",linewidth=3)+
  theme_classic()+
  labs(x="x",y="y",title=bquote(e^x))+
  theme(text=element_text(size=28))
```


<!---------------------------------------------------------------------->

## {#der-exp data-menu-title="Derivative of the exponential function"}

[Derivative of the exponential function]{.slide-title}

<hr>

We have that
$$
\large
\frac{d}{dx}e^x=e^x
$$

The derivative at every point on this line is simply $e(x)$.

<br>

```{r,fig.align='center',out.width="75%"}
library(tidyverse)
x=seq(-3,3,by=0.01)
y=exp(x)

ggplot()+
  geom_line(aes(x=x,y=y),color="black",linewidth=3)+
  theme_classic()+
  labs(x="x",y="y",title=bquote(e^x))+
  theme(text=element_text(size=28))
```


## {#er-exp-con data-menu-title="Derivatives of the exponential function"}

[Derivative of the exponential function]{.slide-title}

<hr>

```{r,fig.align='center',out.width="25%"}
knitr::include_graphics("images/exp_comic.png")
```


## {#higher-order-der data-menu-title="Higher Order Derivatives"}

[Higher order derivatives]{.slide-title}

<hr>

- We can continue to take derivatives of derivatives.

- The second derivative becomes the rate of change of the rate of change. 

- If we interpret the first derivative as velocity, then the second derivative is acceleration. 

. . .

- Notation: 

    - Function: $f(x) = y$
    - 1st derivative: $f'(x)$ or $\frac{dy}{dx}f$
    - 2nd derivative: $f''(x)$ or $\frac{d^2y}{dx^2}$
    - nth derivative: $f^{(n)}(x)$ or $\frac{d^ny}{dx^n}$


## {#ta data-menu-title=Team" background-color="#003660"}

<div class="page-center">
<div class="custom-subtitle">Team Assessment</div>
</div>

## {#ta-1-q1 data-menu-title="Team Assessment 1 Question 1"}

:::{.center-text}
Part 1
:::

‚úèÔ∏è [Identify which differentiation rule or rules works best for each function.]{style="color:green;"}

$$
\begin{align}
\text{A) }y=e^{\sqrt{3x+10}} & &\text{B)  }g(y)=\frac{(8y+2)}{(4y+3)^3}  &  & \text{C) }p(b)=18b\cdot e^{2b}
\end{align}
$$


## {#ta-1-q2 data-menu-title="Team Assessment Question 2"}

:::{.center-text}
Part 2
:::


1) Find the first derivative of

$$
f(x)=(2x-x^2)^3.
$$

<br>
<br>

2) Find the first derivative of

$$
f(x)=\frac{2}{x^2+1}.
$$

<br>
<br>

3) Find the third derivative of

$$
f(x)=x^2(2x+1).
$$


## {#app-derv data-menu-title="Applications of Derivatives" background-color="#003660"}

<div class="page-center">
<div class="custom-subtitle">Application of Derivatives</div>
</div>

## {#exp-real-world data-menu-title="Exponential functions in the world"}

[Exponential functions in the world]{.slide-title}

<hr>

[Infectious diseases](https://ourworldindata.org/covid-cases?country=~USA)

<br>

[Human population](https://ourworldindata.org/grapher/population)

<br>

[Communication](https://ourworldindata.org/grapher/ict-adoption)

<br> 

[Growth of renewable energy](https://ourworldindata.org/grapher/modern-renewable-prod)


## {#log-growth data-menu-title="Logistic Growth" .smaller}

[Logistic growth]{.slide-title}

<hr>

Growth modeled by an exponential function is unbounded, but resource limits do exist.

Modeling growth using a **logistic growth model**: growth is initially exponential but levels off as the environment's **carrying capacity** is reached. The growth rate is given by

$$
\frac{dN}{dt} = rN\left(\frac{K-N}{K}\right).
$$

where $N=\text{population, }r=\text{growth rate, }t=\text{time, and }K=\text{carrying capacity}.$

<div class="page-center">
![](images/carry.webp){fig-align="center" width="60%"}
</div>


## {#log-fisheries data-menu-title="Fisheries and Biological conservation"}

[Important in fisheries and biological conservation]{.slide-title}

<hr>

::::{.columns}
:::{.column width="50%"}
```{r,fig.align='center',fig.dim=c(5,5.5),out.width="90%"}
x=seq(0,50)
logistic<-function(t,p,k,r){
 out= p*k*exp(r*t)/((k-p)+p*exp(r*t))
 
 return(out)
}

y=logistic(t=x,p=10,k=100,r=.15)

sec_log<-function(t,p,k,r){
  r*p*k*(k-p)*exp(r*t)/((k-p)+p*exp(r*t))^2
}

z=sec_log(t=x,p=10,k=100,r=.15)
p1<-ggplot()+
  geom_line(aes(x=x,y=y),linewidth=2)+
  theme_classic()+
  labs(y="Population",x="Time",title="Logistic Growth")+
  geom_hline(yintercept=100,color="red",linewidth=2,linetype=2)+
  annotate("text",label="Carrying Capacity",x=25,y=122,size=6)+
    annotate("segment",x=25,xend=25,y=115,yend=101,color="red",size=1,arrow=arrow())+
  theme(text = element_text(size = 16))+
  ylim(0,130)

p2<-ggplot()+
  geom_line(aes(x=x,y=z),linewidth=2)+
  theme_classic()+
  labs(y="Rate of Population Growth",x="Time",title="Derivative of Logistic")+
  annotate("segment",x=29,xend=16,y=3.2,yend=3.8,size=1,arrow=arrow())+
  annotate("text",label="Maximum\nSustainable\n Yield",x=40,y=3.1,size=6)+
  theme(text = element_text(size = 16)) 

p1

```
:::
:::{.column width="50%"}

```{r,fig.align='center',fig.dim=c(5,5.5),out.width="90%"}
p2
```
:::
::::

## {#app-derv-exp data-menu-title="Derivatives solve environmental problems"}

[Using derivatives we can find crucial information to solve environmental problems]{.slide-title}

<hr>

Derivatives allow us to:

<br>

1) Find instantaneous rate of change at any point

<br>

2) Find when functions are increasing or decreasing

<br>

3) Find the optimal values of functions

    - Optimal values are key to designing effective policies
    
## {#pop data-menu-title="How quickly is the human population rising right now?"}

[How quickly is the human population rising right now?]{.slide-title}

<hr>

Dochy et al. (1995) used the following function to describe the increase in human population over time:

$$
x(t)=\frac{1}{c-\beta t}
$$


Where $c=9.833*10^{-3}$, $\beta=4.849*10^{-6}$, and $x$ is the total human population in millions at year $t$.

. . .

<br>
<br>

‚úèÔ∏è [Answer the following questions using the Dochy et al. model.]{style="color:green;"}

[- How quickly was the human population increasing in 1450?]{style="color:green;"}

[- What should be the population growth rate in 2024 according to this model?]{style="color:green;"}

## {#pop-ex-1 data-menu-title="Human Population Example"}

[Use derivatives to find the answers!]{.slide-title}

<hr>

[- How quickly was the human population increasing in 1450?]{style="color:green;"}

. . .

"How quickly" are code words for "take the first derivative" of $x(t)=\frac{1}{c-\beta t}$. Let's do that:

$$
\begin{align}
x(t)&=\frac{1}{c-\beta t} \\
x(t)&=(c-\beta t)^{-1} &\text{Rearrange} \\
\frac{dx}{dt}&=\beta(c-\beta t)^{-2} &\text{Chain and Power Rule}\\
\end{align}
$$

. . .

Since the question is asking for how quickly was the population increasing in 1450 we need to evaluate the derivative at $t=1450$. This is
$$x'(1450)=.61$$

So, *human population in 1450 was increasing at a rate of .61 million per year*.

## {#pop-ex-2 data-menu-title="Human Population Example"}

[Use derivatives to find the answers!]{.slide-title}

<hr>


[- What should be the population growth rate in 2024 according to this model?]{style="color:green;"}

. . .

"Population growth rate in 2024" means "evaluate the first derivative at $t=2024". So let's do that:

$$x'(2024) = \beta(c-\beta 2024)^{-2} = 13,980.$$
 
So, *human population in 2024 will be increasing at a rate of 13,980 million per year according to this model*.


## {#pop-ex-3 data-menu-title="Human Population Example"}

[The model isn't wrong, just not predictive out of sample]{.slide-title}

<hr>

::::{.columns}
:::{.column width="50%"}
```{r,fig.align='center',fig.cap="Figure 2 from Dochy 2015",out.width="85%"}
knitr::include_graphics("images/dochy.PNG")
```
:::
:::{.column width="50%"}

```{r,fig.align='center',out.width="95%"}
knitr::include_graphics("images/population-regions-with-projections.png")
```
:::
::::


<!--
## {#derv-help data-menu-title="Derivatives help us understand the beavhior of functions and also people"}

[Derivatives help us understand the behavior of functions and also people]{.slide-title}

<hr>

- Useful in designing predictive theory for new policies

- Personal Example: Will a fishery insurance program incentivize overfishing?

$$
\begin{align}
\begin{bmatrix}\frac{\partial K}{\partial \gamma} \\ \frac{\partial L}{\partial \gamma}\end{bmatrix}
=-\begin{bmatrix}
\frac{\partial U}{\partial K \partial K} & \frac{\partial U}{\partial K \partial L} \\
\frac{\partial U}{\partial L \partial K} & \frac{\partial U}{\partial L \partial L}\end{bmatrix}^{-1}\begin{bmatrix}\frac{\partial U}{\partial K \partial \gamma}\\ \frac{\partial U}{\partial L \partial \gamma}\end{bmatrix}
\end{align}
$$

- What conditions lead to:

$$
\begin{align}
\begin{bmatrix}\frac{\partial K}{\partial \gamma} \\ \frac{\partial L}{\partial \gamma}\end{bmatrix}\lesseqgtr 0
\end{align}
$$
-->

## {#derivative-sign-section data-menu-title="Sign of the derivative" background-color="#003660"}

<div class="page-center">
<div class="custom-subtitle">Positive and Negative Derivatives</div>
</div>
<!---------------------------------------------------------------------->

## {#increasing data-menu-title="Increasing and Decreasing functions"}

[Increasing and decreasing functions]{.slide-title}

<hr>

<!---------------------------------------------------------------------->

## {#increasing data-menu-title="Increasing and Decreasing functions"}

[Increasing and decreasing functions]{.slide-title}

<hr>

Take an interval $(a,b)$. A function $f(x)$ is...

 - ... **increasing** on $(a,b)$ if $f(x_1) \leq f(x_2)$ every time $x_1<x_2$ and $x_1, x_2$ in $(a,b)$.

- ... **decreasing** on $(a,b)$ if $f(x_1) \geq f(x_2)$ every time $x_1<x_2$ and $x_1, x_2$ in $(a,b)$.

- ... **constant** on an interval $(a,b)$ if $f(x_1) = f(x_2)$ for every $x_1, x_2$ in $(a,b)$.



üôÇ *This all really means what you think it means:*

<div class="page-center">
![](images/concavity-second-derivative-no-labels.gif){fig-align="center" width="40%"}
</div>

<!--TODO: find a better graph with no derivatives in incresing, decreasing etc-->

<!---------------------------------------------------------------------->

## {#sign-of-derivative-blank data-menu-title="Sign of the derivative"}

[Increasing and decreasing functions]{.slide-title}

<hr>

Let $f(x)$ be a function that is differentiable on the interval $(a,b)$, then:


<!---------------------------------------------------------------------->

## {#sign-of-derivative data-menu-title="Sign of the derivative"}

[Increasing and decreasing functions]{.slide-title}

<hr>

Let $f(x)$ be a function that is differentiable on the interval $(a,b)$, then:

  - If $f'(x)>0$ for all $x$ values between $a$ and $b$, then $f(x)$ is increasing on $(a,b)$

  - If $f'(x)<0$ for all $x$ values betwen $a$ and $b$, then $f(x)$ is decreasing on $(a,b)$
    
    
  - If $f'(x)=0$ for all values between $a$ and $b$, then $f(x)$ is constant on $(a,b)$

<div class="page-center">
![](images/increase.PNG){fig-align="center" width="60%"}
</div>

<!---------------------------------------------------------------------->

## {#concavity data-menu-title="Finding maxima/minima"}

[Concavity]{.slide-title}

<hr>

TODO write this convexity slide



<!---------------------------------------------------------------------->

## {#max-min data-menu-title="Local maxima and minima of funcitons"}

[Local maxima and minima of funcitons]{.slide-title}
<hr>
A funciton $f(x)$ has...

-  a **local maximum** at $p$ if $f(p)$ is greater than or equal to the values of $f$ for points near $p$.

. . .

-  a **local minimum** at $p$ if $f(p)$ is less than or equal to the values of $f$ for points near $p$.

. . .

-  a **critical point** $p$ if $f'(p)=0$. The value $f(p)$ at a critital point $p$ is called a **critical value**.

. . .

Finding critical points helps us solve optimization problems: every maximum and miniumum occurs at a critical point.

<div class="page-center">
![](images/Maxima_and_Minima.svg.png){fig-align="center" width="45%"}
</div>
<!---------------------------------------------------------------------->

## {#optimization-motivation data-menu-title="Finding maxima/minima"}

[Finding maxima/minima]{.slide-title}

<hr>

<div class="page-center">
![](images/concavity-second-derivative-no-labels.gif){fig-align="center" width="65%"}
</div>

<!---------------------------------------------------------------------->

## {#optimization data-menu-title="Finding maxima/minima"}

[Finding maxima/minima]{.slide-title}

<hr>

[1) Find critical points with the 1st derivative:]{style="color:red;"}

- If $f(x)$ has a local maximum or minimum at $p$ then $f'(p)$ =0. 

- This means that we need to look for local max/min among critical points (the values for $x$ for which $f'(x)=0$).

<br>

:::{.fragment .fade-in}
[2) Apply the 2nd derivative test to critical points:]{style="color:red;"}

- Whether a critical point is a maximum or minimum requires us to test if the function is concave up or concave down around that point. 

- If $f'(p)=0$ and $f''(p)<0$ then $f(x)$ has a local maximum at $p$.

- If $f'(x)=0$ and $f''(x)>0$, then $f(x)$ has a local minimum at $p$.

:::
<!---------------------------------------------------------------------->

## {#opt-graph-blank data-menu-title="Example"}

[Example]{.slide-title}

<hr>

‚úèÔ∏è [Consider the function  $f(x)=x^3-12x+2$. What are its local maxima and minima?]{style="color:green;"}

<!---------------------------------------------------------------------->

## {#opt-graph data-menu-title="Example" .smaller}

[Example]{.slide-title}

<hr>

‚úèÔ∏è [Consider the function  $f(x)=x^3-12x+2$. What are its local maxima and minima?]{style="color:green;"}

::::{.columns}
:::{.column width="50%"}

:::{.fragment .fade-in}
1. Find critical points with 1st derivative:

$$
\begin{align}
f(x)&=x^3-12x+2 \\
f'(x)&=3x^2-12 \\
x^*&=-2  & x^*=2
\end{align}
$$
:::

:::{.fragment .fade-in}
2. Apply 2nd derivative test to critical points:

$$
\begin{align}
f''(x)&=6x \\
f''(-2)&<0  &f''(2)>0
\end{align}
$$
:::

:::{.fragment .fade-in}
<br> 

By the first order conditions we know that $x=2$ and $x=-2$ are the critical points of the function.

The second order conditions inform us that $f(x)$ has a local maximum at $x=-2$ and a local minimum at $x=2$.
:::
:::
:::{.column width="50%"}

:::{.fragment .fade-in}
```{r fig.align='center',fig.dim=c(5,5.5),out.width="90%"}

x=seq(-5,5,by=.1)
y=x^3-12*x+2

ggplot()+
  geom_line(aes(x=x,y=y),size=2.5,color="#003660")+
  theme_classic()+
  annotate("text",x=-2,y=35,label="Local Maximum",size=6)+
  annotate("text",x=2,y=-35,label="Local Minimum",size=6)+
  annotate("segment",x=0.5,xend=4,y=-14,yend=-14,linetype=2,color="#FEBC11",size=2)+
  annotate("segment",x=-.5,xend=-4,y=18,yend=18,linetype="dashed",color="#FEBC11",size=2)+
  theme(text = element_text(size = 28)) 

```
:::
:::
::::


## {#ta-2 data-menu-title="Team Assessment 2" background-color="#003660"}

<div class="page-center">
<div class="custom-subtitle">Team Assessment</div>
</div>


## {#gta2-1 data-menu-title="Team Assessment 2 Questions"}

‚úèÔ∏è [1. How many local minimums and maximums can you find on this graph?]{style="color:green;"}

```{r,fig.align='center'}
x=seq(-1,2.75,by=0.01)

y=2*x^6-13*x^5+26*x^4-7*x^3-28*x^2+20*x

ggplot()+
  geom_line(aes(x=x,y=y),color="#003660",size=3)+
  theme_classic()+
  theme(text = element_text(size = 28)) 
  

```


## {#gta2-2 data-menu-title="Team Assessment 2 Questions"}

‚úèÔ∏è [2. Find all the critical points of this function. Identify which are minima and which are maxima.]{style="color:green;"}

[
$$
f(x)=2x^3-6x^2+3x+15
$$]{style="color:green;"}

## {#gta2-3 data-menu-title="Team Assessment 2 Questions"}

‚úèÔ∏è  [3. Your team has been hired to help the city of Santa Barbara to help eliminate a nasty pollutant in our streams. You are choosing between two policies. Policy A provides $\sqrt{10x+4}$ benefits where $x$ is the dollar spent on interventions. Policy B provides $\sqrt{20x+4}$ benefits for every dollar spent. However, each policy has a cost associated with each. Policy A has a constant linear cost at $2x$ and Policy B has a constant linear cost at $3x$.]{style="color:green;"}

<br>

[a) Which policy is cheaper?]{style="color:green;"}

<br>

[b) Find the optimal amount of interventions dollars to spend for each policy. Consider both costs and benefits. [Hint: Remember $\sqrt{}$ is just $x^{\frac{1}{2}}$. You can use exponent rules to help solve]]{style="color:green;"}

<br>

[c) Which policy provides the most maximun net benefits?]{style="color:green;"}

<br>


[d) Which policy should the city of Santa Barbara pursue?]{style="color:green;"}

## {#solutions data-menu-title="Solutions" .smaller}

[Solution to exercise 3]{.slide-title}

<hr>

**a. Which policy is cheaper?**  
Policy A is cheaper: it costs $2x$ vs. $3x$ for Policy B.

**b. Optimal spending = maximizing net benefits**  
For this, we need to create a function representing the net benefits for each policy:

$$
\begin{align}
B_A (x) &= \sqrt{10x+4} - 2x & \text{net benefits for policy A,}\\
B_A (x) &= \sqrt{20x+4} - 3x & \text{net benefits for policy B}.
\end{align}
$$
Solving for critical points and applying the second derivative test we get that $B_A$ benefits are maximized when $x_A=\frac{9}{40}=0.225$ dollars are spent and $B_B$ benefits are maximized when $x_B=\frac{16}{45}\approx0.356$ dollars are spent.   

**b. Which policy provides the most benefits?**  
If we compare the maximum net benefits offered by each policy we get
$$
B_A (0.225) = 2.05\  \text{ and } 
B_B (\frac{16}{45})\  \approx 2.27.
$$

So policy B provides the maximum net benefits. 

**d. Which policy should the city pursue?**  

Because Policy B yields the larger maximal net benefit (‚âà2.27), the City of Santa Barbara should probably pursue Policy B, assuming there are no restrictions in how much money they can invest in the policy.
